{% assign max_quantity = product.metafields.custom.max_quantity | default: 5 %}
{% assign rating = product.metafields.custom.rating | default: 4.5 %}

<div class="product-detail-container">
  <!-- Product Title -->
  <h1 class="product-title">{{ product.title }}</h1>

  <!-- Product Price -->
  <p class="product-price">${{ product.price | money }}</p>

  <!-- Ratings (Stars) -->
  <div class="product-rating">
    {% for i in (1..5) %}
      {% if i <= rating %}
        <span class="star full">&#9733;</span> <!-- Full Star -->
      {% elsif i == rating | round and rating > i %}
        <span class="star half">&#9733;</span> <!-- Half Star -->
      {% else %}
        <span class="star empty">&#9734;</span> <!-- Empty Star -->
      {% endif %}
    {% endfor %}
  </div>

  <!-- Quantity Selector -->
  <div class="quantity-selector">
    <button class="qty-btn minus">-</button>
    <input type="number" class="qty-input" value="1" min="1" max="{{ max_quantity }}" step="1">
    <button class="qty-btn plus">+</button>
  </div>

  <!-- Add to Cart Button -->
  <form method="post" action="/cart/add">
    <input type="hidden" name="id" value="{{ product.variants.first.id }}">
    <button type="submit" class="add-to-cart">Add to Cart</button>
  </form>

  <!-- Wishlist Button -->
  <button class="wishlist-btn">&#10084;</button>

  <!-- Additional Info -->
  <div class="product-info">
    <p><strong>UPC:</strong> {{ product.metafields.custom.upc | default: "N/A" }}</p>
    <p><strong>Availability:</strong> {% if product.available %} In Stock {% else %} Out of Stock {% endif %}</p>
    <p><strong>Max Purchase:</strong> {{ max_quantity }}</p>
    <p><strong>Shipping:</strong> Free Shipping</p>
  </div>

  <!-- Expandable Sections -->
  <div class="product-sections">
    <div class="section">
      <h3 class="toggle-btn" onclick="toggleSection('desc')">Product Description +</h3>
      <div id="desc" class="section-content">{{ product.description }}</div>
    </div>
    <div class="section">
      <h3 class="toggle-btn" onclick="toggleSection('specs')">Specifications +</h3>
      <div id="specs" class="section-content">{{ product.metafields.custom.specifications | default: "No specifications available." }}</div>
    </div>
    <div class="section">
      <h3 class="toggle-btn" onclick="toggleSection('manuals')">Manuals & Charts +</h3>
      <div id="manuals" class="section-content">{{ product.metafields.custom.manuals | default: "No manuals available." }}</div>
    </div>
  </div>
</div>

<!-- CSS -->
<style>
.product-detail-container {
  max-width: 550px;
  margin: auto;
  font-family: 'Montserrat', sans-serif;
}
.product-title { font-size: 20px; font-weight: 500; }
.product-price { font-size: 24px; font-weight: 500; color: #C02127; }
.product-rating .star { font-size: 20px; color: #FFD700; }
.quantity-selector { display: flex; align-items: center; }
.qty-btn { border: 1px solid #CFCFCF; padding: 5px 10px; }
.qty-input { width: 50px; text-align: center; }
.add-to-cart { background: #C02127; color: white; border-radius: 50px; padding: 10px 20px; }
.wishlist-btn { background: none; border: none; font-size: 24px; cursor: pointer; }
.product-sections .section-content { display: none; }
</style>

<!-- JavaScript -->
<script>
function toggleSection(id) {
  var section = document.getElementById(id);
  section.style.display = (section.style.display === "block") ? "none" : "block";
}
</script>
{% assign max_quantity = product.metafields.custom.max_quantity | default: 5 %}
{% assign rating = product.metafields.custom.rating | default: 4.5 %}

<div class="product-detail-container">
  <!-- Product Title -->
  <h1 class="product-title">{{ product.title }}</h1>

  <!-- Product Price -->
  <p class="product-price">${{ product.price | money }}</p>

  <!-- Ratings (Stars) -->
  <div class="product-rating">
    {% for i in (1..5) %}
      {% if i <= rating %}
        <span class="star full">&#9733;</span> <!-- Full Star -->
      {% elsif i == rating | round and rating > i %}
        <span class="star half">&#9733;</span> <!-- Half Star -->
      {% else %}
        <span class="star empty">&#9734;</span> <!-- Empty Star -->
      {% endif %}
    {% endfor %}
  </div>

  <!-- Quantity Selector -->
  <div class="quantity-selector">
    <button class="qty-btn minus">-</button>
    <input type="number" class="qty-input" value="1" min="1" max="{{ max_quantity }}" step="1">
    <button class="qty-btn plus">+</button>
  </div>

  <!-- Add to Cart Button -->
  <form method="post" action="/cart/add">
    <input type="hidden" name="id" value="{{ product.variants.first.id }}">
    <button type="submit" class="add-to-cart">Add to Cart</button>
  </form>

  <!-- Wishlist Button -->
  <button class="wishlist-btn">&#10084;</button>

  <!-- Additional Info -->
  <div class="product-info">
    <p><strong>UPC:</strong> {{ product.metafields.custom.upc | default: "N/A" }}</p>
    <p><strong>Availability:</strong> {% if product.available %} In Stock {% else %} Out of Stock {% endif %}</p>
    <p><strong>Max Purchase:</strong> {{ max_quantity }}</p>
    <p><strong>Shipping:</strong> Free Shipping</p>
  </div>

  <!-- Expandable Sections -->
  <div class="product-sections">
    <div class="section">
      <h3 class="toggle-btn" onclick="toggleSection('desc')">Product Description +</h3>
      <div id="desc" class="section-content">{{ product.description }}</div>
    </div>
    <div class="section">
      <h3 class="toggle-btn" onclick="toggleSection('specs')">Specifications +</h3>
      <div id="specs" class="section-content">{{ product.metafields.custom.specifications | default: "No specifications available." }}</div>
    </div>
    <div class="section">
      <h3 class="toggle-btn" onclick="toggleSection('manuals')">Manuals & Charts +</h3>
      <div id="manuals" class="section-content">{{ product.metafields.custom.manuals | default: "No manuals available." }}</div>
    </div>
  </div>
</div>

<!-- CSS -->
<style>
.product-detail-container {
  max-width: 550px;
  margin: auto;
  font-family: 'Montserrat', sans-serif;
}
.product-title { font-size: 20px; font-weight: 500; }
.product-price { font-size: 24px; font-weight: 500; color: #C02127; }
.product-rating .star { font-size: 20px; color: #FFD700; }
.quantity-selector { display: flex; align-items: center; }
.qty-btn { border: 1px solid #CFCFCF; padding: 5px 10px; }
.qty-input { width: 50px; text-align: center; }
.add-to-cart { background: #C02127; color: white; border-radius: 50px; padding: 10px 20px; }
.wishlist-btn { background: none; border: none; font-size: 24px; cursor: pointer; }
.product-sections .section-content { display: none; }
</style>

<!-- JavaScript -->
<script>
function toggleSection(id) {
  var section = document.getElementById(id);
  section.style.display = (section.style.display === "block") ? "none" : "block";
}
</script>
{% schema %}
    {
      "name": "Product Details",
      "settings": [
        {
          "type": "range",
          "id": "max_quantity",
          "label": "Max Purchase Quantity",
          "min": 1,
          "max": 10,
          "default": 5
        },
        {
          "type": "checkbox",
          "id": "show_rating",
          "label": "Show Product Rating",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_upc",
          "label": "Show UPC Code",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_specs",
          "label": "Show Specifications",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_manuals",
          "label": "Show Manuals & Charts",
          "default": true
        },
        {
          "type": "text",
          "id": "custom_shipping_text",
          "label": "Custom Shipping Message",
          "default": "Free Shipping"
        }
      ],
      "blocks": [
        {
          "type": "text",
          "name": "Additional Information",
          "settings": [
            {
              "type": "text",
              "id": "info_title",
              "label": "Title",
              "default": "Important Note"
            },
            {
              "type": "textarea",
              "id": "info_content",
              "label": "Content",
              "default": "This product has a limited warranty."
            }
          ]
        }
      ],
      "presets": [
        {
          "name": "Product Details Section",
          "settings": {}
        }
      ]
    }
    {% endschema %}
    